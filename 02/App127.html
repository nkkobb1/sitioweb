<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mundo Acuático - Enciclopedia Viva y Extinta</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Fuentes limpias y legibles -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* --- Estilos Adaptados para Mundo Acuático --- */
        :root {
            --color-primary: #0ea5e9; /* Azul Cielo Brillante */
            --color-secondary: #14b8a6; /* Teal / Turquesa */
            --color-tertiary: #f97316; /* Naranja Coral (acento) */
            --color-background: #f0f9ff; /* Azul Muy Claro (Cielo/Agua Superficial) */
            --color-text: #0f172a; /* Azul Oscuro Pizarra */
            --color-text-muted: #64748b; /* Gris Azulado */
            --color-modal-bg: #ffffff; /* Blanco */
            --color-border: #cbd5e1; /* Borde Gris Claro */
            --color-error-bg: #fff1f2; /* Fondo error rosa muy claro */
            --color-error-text: #be123c; /* Texto error rojo oscuro */
            --color-error-border: #fecdd3; /* Borde error rosa claro */

            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --border-radius: 6px; /* Bordes ligeramente redondeados */
            --transition-normal: all 0.25s ease-in-out;
        }
        body { font-family: 'Nunito', sans-serif; background-color: var(--color-background); color: var(--color-text); line-height: 1.7; font-weight: 400; }
        h1, h2, h3, h4, .logo { font-family: 'Lato', sans-serif; font-weight: 700; }
        .logo { color: var(--color-primary); }
        h1.page-title { color: var(--color-primary); font-weight: 700; }
        h2.section-title { color: var(--color-text); border-bottom: 3px solid var(--color-primary); padding-bottom: 0.6rem; display: inline-block; font-weight: 700; }
        #modal-title { color: var(--color-primary); font-weight: 700; }
        .navbar { background-color: rgba(255, 255, 255, 0.85); backdrop-filter: blur(8px); box-shadow: var(--shadow-md); position: sticky; top: 0; z-index: 20; border-bottom: 1px solid var(--color-border); }
        /* Estilos Buscador */
        #search-container { margin-bottom: 2.5rem; position: relative; }
        #search-input { width: 100%; padding: 0.9rem 1.2rem 0.9rem 3rem; border: 1px solid var(--color-border); border-radius: var(--border-radius); font-size: 1rem; background-color: white; color: var(--color-text); box-shadow: var(--shadow-sm); transition: var(--transition-normal); font-family: 'Nunito'; }
        #search-input::placeholder { color: var(--color-text-muted); }
        #search-input:focus { border-color: var(--color-primary); box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.2); outline: none; }
        #search-container .fa-search { position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); color: var(--color-text-muted); font-size: 1.1rem; transition: color 0.2s ease; }
        #search-input:focus + .fa-search { color: var(--color-primary); }

        #title-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 1rem; }
        .title-item { background-color: var(--color-modal-bg); padding: 1.2rem 1rem; border-radius: var(--border-radius); box-shadow: var(--shadow-sm); cursor: pointer; transition: var(--transition-normal); text-align: center; font-weight: 600; color: var(--color-text); border: 1px solid var(--color-border); display: flex; align-items: center; justify-content: center; min-height: 70px; font-family: 'Nunito'; font-size: 0.95rem; }
        .title-item:hover { transform: translateY(-3px); box-shadow: var(--shadow-md); border-color: var(--color-primary); color: var(--color-primary); background-color: #f0f9ff; /* Fondo azul muy claro hover */ }
        #generate-more-btn { grid-column: 1 / -1; background: linear-gradient(45deg, var(--color-primary), var(--color-secondary)); color: white; padding: 0.8rem 1.5rem; border: none; border-radius: var(--border-radius); font-family: 'Lato', sans-serif; font-weight: 700; cursor: pointer; transition: var(--transition-normal); margin-top: 2rem; letter-spacing: 0.5px; text-shadow: 1px 1px 2px rgba(0,0,0,0.1); }
        #generate-more-btn:hover:not(:disabled) { background: linear-gradient(45deg, var(--color-secondary), var(--color-primary)); box-shadow: var(--shadow-md); transform: scale(1.02); }
        #generate-more-btn:disabled { background: var(--color-text-muted); color: #e5e7eb; cursor: not-allowed; opacity: 0.7; transform: none; box-shadow: none; }
        #generate-more-btn .fa-sync-alt { color: white; }

        #story-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(15, 23, 42, 0.85); /* Overlay azul oscuro/gris */ display: none; align-items: center; justify-content: center; z-index: 50; padding: 1rem; }
        #story-modal.active { display: flex; }
        .modal-content-wrapper {
            background-color: var(--color-modal-bg);
            border-radius: var(--border-radius);
            padding: 1.5rem 2rem;
            max-width: 950px;
            width: 95%;
            max-height: 90vh;
            min-height: 400px;
            overflow: hidden;
            position: relative;
            box-shadow: var(--shadow-lg);
            display: flex;
            flex-direction: column;
            border-top: 5px solid var(--color-primary);
        }
        .modal-close-btn { position: absolute; top: 12px; right: 12px; background: #e2e8f0; border: none; border-radius: 50%; width: 38px; height: 38px; font-size: 1.7rem; color: var(--color-text-muted); cursor: pointer; display: flex; align-items: center; justify-content: center; transition: var(--transition-normal); z-index: 60; }
        .modal-close-btn:hover { background-color: var(--color-primary); color: white; transform: rotate(90deg); }
        #modal-title { font-size: 1.9rem; text-align: center; margin-bottom: 1.2rem; flex-shrink: 0; padding: 0 1rem; line-height: 1.3; }

        /* Área de Contenido Principal (Texto + Imagen al final) */
        #modal-content-area { flex-grow: 1; min-height: 0; display: flex; flex-direction: column; overflow-y: auto; padding-right: 10px; margin-bottom: 1rem;
            scrollbar-width: thin; scrollbar-color: var(--color-secondary) var(--color-border);
        }
        #modal-content-area::-webkit-scrollbar { width: 8px; }
        #modal-content-area::-webkit-scrollbar-track { background: var(--color-border); border-radius: var(--border-radius); }
        #modal-content-area::-webkit-scrollbar-thumb { background-color: var(--color-secondary); border-radius: var(--border-radius); border: 1px solid var(--color-border); }

        #modal-content { padding: 0 5px; }
        #modal-content p:not(:last-child) { margin-bottom: 1.4em; }
        #modal-content strong { color: var(--color-primary); font-weight: 700; }
        #modal-content em { color: var(--color-secondary); font-style: italic; }
        #modal-content h1, #modal-content h2, #modal-content h3, #modal-content h4 { font-family: 'Lato', sans-serif; margin-top: 2.2em; margin-bottom: 1.1em; color: var(--color-primary); border-bottom: 1px solid var(--color-border); padding-bottom: 0.5em; font-weight: 700; }
        #modal-content h1 { font-size: 1.5em; }
        #modal-content h2 { font-size: 1.35em; }
        #modal-content h3 { font-size: 1.2em; color: var(--color-secondary); }
        #modal-content h4 { font-size: 1.1em; color: var(--color-text-muted); border-bottom: none;}
        /* Estilos imagen final y placeholder */
        #modal-content .final-image { display: block; max-width: 85%; height: auto; margin: 2.5rem auto 1rem auto; border: 1px solid var(--color-border); border-radius: var(--border-radius); box-shadow: var(--shadow-md); cursor: pointer; transition: transform 0.2s ease, box-shadow 0.2s ease; }
        #modal-content .final-image:hover { transform: scale(1.02); box-shadow: var(--shadow-lg); }
        #modal-content .image-placeholder { display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 150px; margin: 2.5rem auto 1rem auto; color: var(--color-text-muted); }
        #modal-content .image-placeholder .spinner { border: 4px solid rgba(203, 213, 225, 0.7); width: 35px; height: 35px; border-radius: 50%; border-left-color: var(--color-secondary); animation: spin 1s linear infinite; margin-bottom: 0.5rem; }
        #modal-content .image-placeholder .placeholder-icon { font-size: 2.5rem; color: var(--color-text-muted); }

        /* Chat Section Styles */
        #chat-section { border-top: 1px solid var(--color-border); padding-top: 1rem; margin-top: 1rem; flex-shrink: 0; display: flex; flex-direction: column; max-height: 250px; }
        #chat-history { flex-grow: 1; overflow-y: auto; margin-bottom: 0.8rem; padding: 0.5rem; border: 1px solid var(--color-border); border-radius: var(--border-radius); background-color: #f8fafc; scroll-behavior: smooth;
            scrollbar-width: thin; scrollbar-color: var(--color-tertiary) var(--color-border);
        }
        #chat-history::-webkit-scrollbar { width: 6px; }
        #chat-history::-webkit-scrollbar-track { background: var(--color-border); border-radius: var(--border-radius); }
        #chat-history::-webkit-scrollbar-thumb { background-color: var(--color-tertiary); border-radius: var(--border-radius); }
        .chat-message { margin-bottom: 0.6rem; padding: 0.6rem 0.9rem; border-radius: var(--border-radius); max-width: 85%; word-wrap: break-word; line-height: 1.5; font-size: 0.95rem; }
        .user-message { background-color: var(--color-secondary); color: white; margin-left: auto; text-align: left; font-weight: 400; }
        .ai-message { background-color: #e0f2fe; /* Azul muy claro para AI */ color: var(--color-text); margin-right: auto; text-align: left; font-weight: 400; }
        .chat-error { color: var(--color-error-text); font-style: italic; text-align: center; font-size: 0.9em; }
        #chat-input-area { display: flex; gap: 0.5rem; }
        #chat-input { flex-grow: 1; padding: 0.7rem 0.9rem; border: 1px solid var(--color-border); background-color: white; color: var(--color-text); border-radius: var(--border-radius); font-family: 'Nunito'; font-size: 0.95rem; }
        #chat-input:focus { outline: none; border-color: var(--color-primary); box-shadow: 0 0 0 2px rgba(14, 165, 233, 0.15); }
        #chat-send-btn { padding: 0.7rem 1rem; background-color: var(--color-primary); color: white; border: none; border-radius: var(--border-radius); cursor: pointer; transition: background-color 0.2s ease; font-size: 0.9rem; }
        #chat-send-btn:hover:not(:disabled) { background-color: #0284c7; /* Azul más oscuro hover */ }
        #chat-send-btn:disabled { background-color: var(--color-text-muted); cursor: not-allowed; }
        #chat-loading { text-align: center; padding: 0.5rem; font-size: 0.9em; color: var(--color-text-muted); display: none; }
        #chat-loading .fa-spinner { margin-right: 0.5rem; }

        #modal-loading { text-align: center; padding: 3rem 0; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(240, 249, 255, 0.97); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 55; border-radius: var(--border-radius); }
        .loading-spinner-modal { width: 60px; height: 60px; border: 6px solid var(--color-border); border-top-color: var(--color-primary); border-radius: 50%; animation: spin 1.2s linear infinite; margin: 0 auto 1.5rem auto; }
        #modal-loading p { font-weight: 600; color: var(--color-text); font-size: 1.3rem; font-family: 'Lato'; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .error-msg { background-color: var(--color-error-bg); color: var(--color-error-text); padding: 1.2rem; border-radius: var(--border-radius); border: 1px solid var(--color-error-border); margin-top: 1.5rem; text-align: center; flex-shrink: 0; font-weight: 600; font-family: 'Nunito'; }
        .error-msg i { margin-right: 0.7rem; }
        .content-hidden { display: none !important; }
        .title-item.hidden { display: none; }

        /* Fullscreen Image Overlay */
        #image-fullscreen-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(15, 23, 42, 0.95); /* Azul muy oscuro */ display: none; align-items: center; justify-content: center; z-index: 100; padding: 2rem; cursor: zoom-out; }
        #image-fullscreen-overlay.active { display: flex; }
        #fullscreen-image { max-width: 95%; max-height: 95%; object-fit: contain; border: 2px solid var(--color-secondary); box-shadow: var(--shadow-lg); border-radius: 4px; }
        #fullscreen-close-btn { position: absolute; top: 20px; right: 25px; background: rgba(255, 255, 255, 0.1); border: 1px solid var(--color-secondary); border-radius: 50%; width: 40px; height: 40px; font-size: 1.8rem; color: var(--color-secondary); cursor: pointer; display: flex; align-items: center; justify-content: center; transition: var(--transition-normal); backdrop-filter: blur(4px); }
        #fullscreen-close-btn:hover { background-color: var(--color-secondary); color: white; transform: scale(1.1); }
    </style>
</head>
<body>
     <!-- Header/Navbar -->
     <nav class="navbar mb-10">
         <div class="container mx-auto px-4 py-4 flex flex-col sm:flex-row justify-between items-center">
             <div class="flex items-center text-center mb-3 sm:mb-0">
                 <h1 class="logo text-3xl sm:text-4xl">
                     <i class="fas fa-water mr-3"></i> <!-- Icono agua -->
                     Mundo Acuático
                 </h1>
             </div>
             <span class="text-sm text-gray-600 font-sans tracking-wider">» Enciclopedia Viva y Extinta «</span>
         </div>
     </nav>

     <!-- Main content -->
     <main class="container mx-auto px-4 pb-16">
         <!-- Hero section -->
         <section class="mb-12 text-center">
             <h1 class="page-title text-5xl sm:text-6xl mb-5">Explora las Profundidades</h1>
             <p class="text-xl text-gray-700 mb-8 max-w-3xl mx-auto font-light">Descubre la increíble diversidad de la vida acuática, desde las criaturas actuales hasta los gigantes prehistóricos que dominaron los océanos.</p>
         </section>

         <!-- Search Bar -->
         <section id="search-container" class="mb-10 max-w-2xl mx-auto">
             <input type="text" id="search-input" placeholder="Buscar animal o concepto acuático...">
             <i class="fas fa-search"></i>
         </section>

         <!-- Title List Container -->
         <section class="mb-10">
             <h2 class="section-title text-3xl sm:text-4xl mb-8 text-center mx-auto">
                 <i class="fas fa-fish text-blue-500 mr-2"></i> <!-- Icono pez -->
                 Índice de Especies y Conceptos
             </h2>
             <div id="title-list">
                  <p id="titles-loading" class="text-gray-500 col-span-full text-center text-lg font-sans">Catalogando especies...</p>
                  <!-- Los .title-item se añadirán aquí -->
             </div>
             <p id="no-results" class="text-gray-500 col-span-full text-center text-lg mt-4 hidden font-sans">» No se encontraron especies o conceptos coincidentes «</p>
             <div id="generate-more-container" class="text-center mt-8">
                 <button id="generate-more-btn">
                      <i class="fas fa-sync-alt mr-2 animate-spin hidden"></i>
                     Descubrir Más Especies
                  </button>
             </div>
         </section>

     </main>

     <!-- Explanation Modal -->
     <div id="story-modal">
         <div class="modal-content-wrapper">
             <button class="modal-close-btn" id="modal-close" aria-label="Cerrar">&times;</button>

             <!-- Loading Indicator -->
             <div id="modal-loading">
                 <div class="loading-spinner-modal"></div>
                 <p>Investigando datos...</p>
             </div>

             <!-- Content Area Wrapper (Scrollable Text + Fixed Chat below) -->
             <div id="modal-story-content-area" class="content-hidden flex flex-col flex-grow min-h-0">

                 <!-- Scrollable Text Area -->
                 <div id="modal-content-area">
                     <h2 id="modal-title" class="text-xl md:text-2xl font-bold mb-4 text-center flex-shrink-0"></h2>
                     <div id="modal-content">
                         <!-- Explanation text (HTML) goes here -->
                         <!-- La imagen y su placeholder/spinner se añadirán aquí vía JS -->
                     </div>
                 </div>

                 <!-- Chat Section (Fixed at bottom of content area) -->
                 <div id="chat-section">
                     <h3 class="text-lg font-semibold mb-2 text-center text-gray-700 font-lato">Pregúntale al experto:</h3>
                     <div id="chat-history">
                         <!-- Chat messages will appear here -->
                     </div>
                     <div id="chat-loading">
                         <i class="fas fa-spinner fa-spin"></i> Consultando base de datos...
                     </div>
                     <div id="chat-input-area">
                         <input type="text" id="chat-input" placeholder="Escribe tu pregunta sobre esta especie...">
                         <button id="chat-send-btn" aria-label="Enviar Mensaje">
                             <i class="fas fa-paper-plane"></i>
                         </button>
                     </div>
                 </div>

                 <!-- Error Display Area -->
                 <div id="modal-error" class="error-msg content-hidden mt-4 flex-shrink-0">
                      <i class="fas fa-exclamation-triangle"></i>
                      <span id="modal-error-message"></span>
                  </div>
             </div>
          </div>
      </div>

      <!-- Fullscreen Image Overlay -->
      <div id="image-fullscreen-overlay">
          <button id="fullscreen-close-btn" aria-label="Cerrar Imagen">&times;</button>
          <img id="fullscreen-image" src="" alt="Imagen Ampliada">
      </div>

      <!-- Footer -->
      <footer class="bg-gray-100 text-gray-600 py-6 mt-12 border-t border-gray-200 font-sans">
          <div class="container mx-auto px-4 text-center text-sm">
              <p>Información generada por IA basada en conocimientos de biología marina y paleontología.</p>
              <p class="mt-1">Verifica siempre datos específicos con fuentes científicas actualizadas.</p>
              <p class="mt-2">© 2025 Enciclopedia Mundo Acuático</p>
          </div>
      </footer>


    <script>
        // ========== CONFIG & DATA ==========
        const predefinedTitles = [
            // Mamíferos Marinos Actuales
            "Ballena Azul", "Ballena Jorobada", "Ballena Gris", "Ballena Franca Austral", "Cachalote", "Orca (Ballena Asesina)", "Beluga", "Narval",
            "Delfín Común", "Delfín Mular (Nariz de Botella)", "Delfín Listado", "Delfín Rosado del Amazonas (Boto)", "Marsopa Común", "Vaquita Marina",
            "Foca Común", "Foca Gris", "Foca Leopardo", "Foca Monje del Mediterráneo", "León Marino de California", "Oso Marino Antártico (Lobo de dos pelos)", "Morsa",
            "Nutria Marina", "Nutria Gigante del Amazonas", "Manatí del Caribe", "Dugongo", "Oso Polar (Semi-acuático)",

            // Peces Cartilaginosos (Tiburones y Rayas) Actuales
            "Tiburón Blanco", "Tiburón Tigre", "Tiburón Martillo Gigante", "Tiburón Toro", "Tiburón Mako (Marrajo)", "Tiburón Ballena", "Tiburón Peregrino", "Tiburón Azul (Tintorera)", "Tiburón de Arrecife de Punta Blanca", "Tiburón Gato (Pintarroja)", "Tiburón Zorro", "Tiburón Limón", "Tiburón Cigarro",
            "Manta Raya Gigante (Manta birostris)", "Raya Águila Moteada", "Pastinaca Común (Chucho)", "Pez Sierra Común", "Raya Eléctrica (Torpediniformes)", "Raya Mariposa", "Raya Látigo", "Quimera (Pez Rata)",

            // Peces Óseos Actuales (Diversidad)
            "Atún Rojo", "Atún de Aleta Amarilla", "Salmón del Atlántico", "Salmón del Pacífico (Varias especies)", "Trucha Arcoíris", "Bacalao del Atlántico", "Mero Gigante", "Pargo Rojo", "Dorada", "Lubina Europea", "Sardina Común", "Anchoa Europea (Boquerón)", "Arenque del Atlántico",
            "Pez Payaso (Amphiprioninae)", "Pez Ángel Emperador", "Pez Mariposa de Nariz Larga", "Pez Cirujano Azul", "Pez Loro", "Morena Común", "Congrio Europeo", "Pez Espada", "Marlín Azul", "Pez Vela",
            "Caballito de Mar Común", "Dragón de Mar Foliado", "Pez Aguja", "Pez Globo", "Pez Erizo", "Pez Cofre Moteado", "Pez Escorpión (Rascasote)", "Pez León", "Pez Piedra",
            "Pez Remo Gigante (Regaleco)", "Pez Abisal (Lophiiformes - Rape)", "Pez Hacha (Argyropelecus)", "Pez Dragón Negro (Idiacanthus)", "Pez Víbora (Chauliodus)", "Piraña Roja", "Anguila Eléctrica", "Arapaima Gigas", "Celacanto (Fósil Viviente)", "Pez Luna (Mola mola)",

            // Reptiles Acuáticos Actuales
            "Tortuga Verde", "Tortuga Carey", "Tortuga Laúd", "Tortuga Boba", "Tortuga Lora", "Tortuga Plana",
            "Cocodrilo Marino (De Agua Salada)", "Cocodrilo del Nilo", "Aligátor Americano", "Caimán de Anteojos", "Gavial",
            "Serpiente Marina Común (Hydrophiinae)", "Serpiente Marina Pelágica", "Iguana Marina de Galápagos",

            // Aves Acuáticas (Principalmente Marinas)
            "Pingüino Emperador", "Pingüino Rey", "Pingüino de Adelia", "Pingüino de Magallanes", "Pingüino de Galápagos",
            "Albatros Viajero", "Albatros de Laysan", "Petrel Gigante", "Pardela Cenicienta",
            "Gaviota Argéntea", "Gaviota Sombría", "Charrán Común", "Falaropo Picofino",
            "Alca Común", "Frailecillo Atlántico", "Araos",
            "Pelícano Pardo", "Pelícano Blanco Americano", "Cormorán Grande", "Piquero de Patas Azules", "Fragata Magnífica",

            // Invertebrados Acuáticos (Diversidad)
            "Pulpo Común", "Pulpo Gigante del Pacífico", "Pulpo de Anillos Azules", "Calamar Gigante", "Calamar Colosal", "Calamar de Humboldt", "Sepia Común (Choco)", "Nautilus Pompilius",
            "Langosta Americana", "Langosta Europea", "Cangrejo Azul", "Cangrejo Real Rojo", "Cangrejo Ermitaño", "Camarón Tigre Gigante", "Gamba Blanca", "Krill Antártico", "Percebe", "Cochinilla de Mar (Isópodos)",
            "Medusa Luna (Aurelia aurita)", "Medusa Melena de León Ártica", "Carabela Portuguesa", "Anémona de Mar Común", "Coral Cuerno de Alce", "Coral Cerebro", "Coral de Fuego", "Gorgonia (Abanico de Mar)",
            "Almeja Gigante", "Ostra Común", "Mejillón Común", "Vieira", "Caracol Cono (Conus)", "Liebre de Mar (Aplysia)", "Babosa de Mar (Nudibranquio Cromodoris)",
            "Estrella de Mar Común", "Estrella de Mar Girasol", "Ofiura (Estrella Serpiente)", "Erizo de Mar Común", "Erizo Lápiz", "Dólar de Arena", "Pepino de Mar", "Lirio de Mar (Crinoideos)",
            "Esponja de Mar Común (Calcáreas)", "Esponja de Vidrio (Hexactinélidos)", "Esponja Barril",

            // Animales Acuáticos Extintos (Iconicos)
            "Megalodon (Carcharocles megalodon)", "Dunkleosteus", "Helicoprion (Tiburón con sierra espiral)", "Stethacanthus (Tiburón con yunque)", "Xiphactinus (Pez depredador gigante)", "Leedsichthys (Pez filtrador gigante)",
            "Ichthyosaurus", "Ophthalmosaurus", "Shonisaurus (Ictiosaurio gigante)",
            "Plesiosaurus", "Elasmosaurus", "Liopleurodon", "Pliosaurus",
            "Mosasaurus", "Tylosaurus", "Prognathodon",
            "Archelon (Tortuga gigante)", "Deinosuchus (Cocodrilo gigante)", "Sarcosuchus (SuperCroc)",
            "Basilosaurus (Ballena primitiva dentada)", "Livyatan melvillei (Cachalote depredador gigante)", "Pakicetus (Ancestro terrestre de ballenas)", "Ambulocetus (Ballena caminante)",
            "Ammonites (Cefalópodos con concha espiral)", "Baculites (Ammonites rectos)", "Belemnites (Cefalópodos similares a calamares)",
            "Trilobites (Artrópodos marinos diversos)", "Eurypteridos (Escorpiones marinos gigantes)", "Anomalocaris (Depredador del Cámbrico)", "Opabinia (Criatura de 5 ojos del Cámbrico)", "Wiwaxia (Molusco acorazado del Cámbrico)", "Hallucigenia (Gusano espinoso del Cámbrico)",
            "Placodermos (Peces acorazados primitivos)", "Acanthodios (Tiburones espinosos)", "Osteostraci (Peces sin mandíbula acorazados)",

            // Conceptos y Ecosistemas Acuáticos
            "Arrecife de Coral: Biodiversidad", "Ecosistema de Manglar", "Bosque de Kelp (Algas Laminariales)", "Pradera Marina (Pastos Marinos)", "Zona Intermareal (Litoral)", "Estuario: Mezcla de Aguas", "Zona Abisal: Profundidades Oceánicas", "Fosa de las Marianas: El Punto más Profundo", "Ventilas Hidrotermales: Vida sin Sol", "Filtraciones Frías (Cold Seeps)", "Zona Pelágica (Océano Abierto)", "Zona Nerítica (Sobre Plataforma Continental)", "Bioluminiscencia en el Océano", "Migraciones Marinas (Ballenas, Tortugas, Peces)", "Cadena Alimentaria Marina", "Plancton: Base de la Vida Oceánica (Fitoplancton y Zooplancton)", "Adaptaciones a la Presión del Agua Profunda", "Adaptaciones al Frío (Aguas Polares)", "Camuflaje y Mimetismo Acuático", "Simbiosis Marina (Pez Payaso y Anémona)", "Comunicación Acústica (Cantos de Ballenas, Clics de Delfines)", "Ecolocalización en Cetáceos", "Reproducción en Animales Acuáticos", "Impacto del Cambio Climático en Océanos", "Contaminación por Plásticos en el Mar", "Sobrepesca y sus Consecuencias", "Especies Invasoras Acuáticas", "Conservación Marina: Áreas Protegidas", "Paleontología Marina: Fósiles del Océano", "Evolución de la Vida Acuática", "Extinciones Masivas y Vida Marina", "Criptozoología Marina (Kraken, Serpientes Marinas)", // Añadido como curiosidad

            // Añadir más invertebrados específicos, peces de agua dulce importantes, etc.
        ];
        const aquaticThemes = [
            "mamíferos marinos", "ballenas y delfines", "focas y leones marinos", "tiburones", "rayas", "peces de arrecife", "peces abisales", "peces óseos diversos", "tortugas marinas", "cocodrilos y caimanes", "serpientes marinas", "aves marinas", "pingüinos", "pulpos y calamares", "crustáceos (cangrejos, langostas)", "medusas y corales", "moluscos (almejas, caracoles)", "equinodermos (estrellas, erizos)", "animales acuáticos extintos", "monstruos marinos prehistóricos", "ictiosaurios", "plesiosaurios", "mosasaurios", "trilobites", "ammonites", "vida del Cámbrico", "ecosistemas marinos", "arrecifes de coral", "fosas abisales", "bioluminiscencia", "migraciones marinas", "conservación marina", "fósiles marinos"
        ];
        const textApiConfig = { // Para descripción principal
            model: "mistral",
            systemPrompt: "Eres un biólogo marino y paleontólogo experto, apasionado por la divulgación científica. Describe el animal o concepto acuático indicado de forma detallada, precisa y atractiva. Incluye: Clasificación taxonómica básica, descripción física (tamaño, forma, coloración), hábitat natural (distribución geográfica, profundidad, tipo de ecosistema), dieta y hábitos alimenticios, comportamiento social y reproductivo, adaptaciones notables, estado de conservación (si aplica y es actual), época geológica y descubrimiento (si es extinto), y datos curiosos o relevancia ecológica/histórica. Utiliza un lenguaje claro y vívido. El objetivo es una descripción completa de aproximadamente 1200-1300 palabras. Basa tu descripción únicamente en la siguiente especie o concepto:",
            timeoutSeconds: 150
        };
        const chatApiConfig = { // Config base para chat, system prompt se sobreescribe
            model: "mistral-tiny",
            systemPrompt: "Actúa como un asistente experto en biología marina/paleontología, enfocado únicamente en el animal o concepto que se está mostrando actualmente. Responde preguntas de seguimiento sobre sus características, comportamiento, hábitat, o cualquier detalle mencionado en la descripción principal. Sé preciso, conciso y mantente estrictamente en el tema actual.",
            timeoutSeconds: 45
        };
        const titleGenerationConfig = {
            model: "mistral",
            systemPrompt: "Actúa como un generador de ideas conciso para una enciclopedia de vida acuática. Genera exactamente 15 nombres de animales acuáticos (actuales o extintos, incluyendo invertebrados), o conceptos relevantes de biología marina/paleontología. Prioriza la diversidad de grupos. Devuelve *solo* la lista de nombres/conceptos, uno por línea. No incluyas números, guiones, introducciones ni despedidas.",
            timeoutSeconds: 40
        };

        // ========== DOM ELEMENTS ==========
        const searchInput = document.getElementById('search-input');
        const titleListContainer = document.getElementById('title-list');
        const titlesLoading = document.getElementById('titles-loading');
        const noResultsMsg = document.getElementById('no-results');
        const generateMoreContainer = document.getElementById('generate-more-container');
        const generateMoreBtn = document.getElementById('generate-more-btn');
        const generateMoreSpinner = generateMoreBtn.querySelector('i');
        const storyModal = document.getElementById('story-modal');
        const modalCloseBtn = document.getElementById('modal-close');
        const modalLoadingIndicator = document.getElementById('modal-loading');
        const modalStoryContentArea = document.getElementById('modal-story-content-area');
        const modalTextArea = document.getElementById('modal-content-area'); // Área de texto y imagen
        const modalTitle = document.getElementById('modal-title');
        const modalContent = document.getElementById('modal-content');
        const modalError = document.getElementById('modal-error');
        const modalErrorMessage = document.getElementById('modal-error-message');
        // Chat Elements
        const chatSection = document.getElementById('chat-section');
        const chatHistory = document.getElementById('chat-history');
        const chatInput = document.getElementById('chat-input');
        const chatSendBtn = document.getElementById('chat-send-btn');
        const chatLoadingIndicator = document.getElementById('chat-loading');
        // Fullscreen Image Elements
        const imageFullscreenOverlay = document.getElementById('image-fullscreen-overlay');
        const fullscreenImage = document.getElementById('fullscreen-image');
        const fullscreenCloseBtn = document.getElementById('fullscreen-close-btn');

        // ========== State Variables ==========
        let currentAnimalTitle = null; // Para saber de qué trata el chat

        // ========== API FUNCTIONS ==========
        async function fetchTextFromApi(prompt, config, isChat = false) {
             const encodedPrompt = encodeURIComponent(prompt);
             const systemPromptToUse = isChat && currentAnimalTitle
                 ? `Eres un asistente experto en biología marina/paleontología, enfocado únicamente en el animal o concepto llamado '${currentAnimalTitle}'. Responde preguntas de seguimiento sobre sus características, comportamiento, hábitat, o cualquier detalle mencionado en la descripción principal. Sé preciso, conciso y mantente estrictamente en el tema actual.`
                 : config.systemPrompt;
             const encodedSystem = encodeURIComponent(systemPromptToUse);

             const params = new URLSearchParams({ model: config.model, system: encodedSystem });
             if (config.seed && !isChat) params.append('seed', config.seed);
             const url = `https://text.pollinations.ai/${encodedPrompt}?${params.toString()}`;
             console.log(`Fetching text from API (${config.model}, Chat: ${isChat}): ${url.substring(0, 200)}...`);

             const controller = new AbortController();
             const timeoutId = setTimeout(() => controller.abort(), config.timeoutSeconds * 1000);

             try {
                 const response = await fetch(url, { signal: controller.signal });
                 clearTimeout(timeoutId);
                 if (!response.ok) {
                     // *** MENSAJE DE ERROR AMIGABLE ***
                     throw new Error(`(Error ${response.status}) Nuestros servidores están experimentando mucho tráfico en este momento. Por favor, intenta de nuevo en unos segundos.`);
                 }
                 const text = await response.text();
                 if (!text || text.trim().length === 0) {
                     throw new Error("La respuesta de la IA llegó vacía. Intenta reformular la pregunta o el concepto.");
                 }
                 console.log(`API Response received (${text.length} chars)`);
                 return text;
             } catch (error) {
                 clearTimeout(timeoutId);
                 console.error("API Fetch Error:", error);
                 if (error.name === 'AbortError') {
                     // *** MENSAJE DE ERROR AMIGABLE PARA TIMEOUT ***
                     throw new Error(`La conexión tardó demasiado (>${config.timeoutSeconds}s). Revisa tu conexión o intenta más tarde.`);
                 }
                 throw new Error(error.message || "Ocurrió un error inesperado al contactar la IA.");
             }
        }
        async function fetchExplanationText(conceptTitle) { return fetchTextFromApi(conceptTitle, textApiConfig, false); }
        async function fetchChatResponse(userQuery) {
            if (!currentAnimalTitle) throw new Error("Error interno: No se ha establecido el contexto del animal para el chat.");
            return fetchTextFromApi(userQuery, chatApiConfig, true);
        }
        async function fetchGeneratedTitles() {
            const randomTheme = getRandomElement(aquaticThemes) || "animales acuáticos diversos";
            const specificPrompt = `Genera 15 nombres/conceptos sobre ${randomTheme}`;
            return fetchTextFromApi(specificPrompt, titleGenerationConfig, false)
                 .then(text => {
                     const titles = text.split('\n').map(line => line.replace(/^[-\d.\s*]+/, '').trim()).filter(line => line.length > 3 && line.length < 150);
                     if (titles.length < 5) throw new Error("La IA no generó suficientes ideas de especies.");
                     return titles.slice(0, 15);
                 });
        }
        function createPollinationsImageUrl(promptText, options = {}) {
             const defaults = { seed: Math.floor(Math.random() * 10000000), width: 800, height: 600, nologo: true };
             const settings = { ...defaults, ...options };
             const safePromptText = typeof promptText === 'string' && promptText.trim() !== '' ? promptText : "diverse marine life";
             // Prompt mejorado para realismo/ilustración científica
             const enhancedPrompt = `Detailed scientific illustration OR realistic underwater photograph of '${safePromptText}' in its natural aquatic habitat (e.g., coral reef, open ocean, deep sea trench, kelp forest, prehistoric sea). Focus on accurate anatomy and coloration. Dynamic pose if applicable. Clear water, natural lighting.`;
             const escapedPrompt = encodeURIComponent(enhancedPrompt);
             if (!escapedPrompt) return '';
             // Negativos más específicos para evitar texto y elementos no deseados
             const negativePrompt = "text, words, labels, letters, title, caption, diagram, chart, graph, map, multiple animals unless specified, collage, drawing, sketch, cartoon, unrealistic, blurry, low quality, human divers, equipment, watermark, signature";
             const escapedNegative = encodeURIComponent(negativePrompt);
             let url = `https://image.pollinations.ai/prompt/${escapedPrompt}?seed=${settings.seed}&width=${settings.width}&height=${settings.height}&negative=${escapedNegative}`;
             if (settings.nologo) url += '&nologo=true';
             console.log("Image URL:", url);
             return url;
         }

        // ========== Text Formatting Function ========== (sin cambios)
        function formatExplanationText(rawText) { /* ... (same as before) ... */
            if (!rawText) return '';
            let formatted = rawText.trim();
            formatted = formatted.replace(/\\text\{(.*?)\}/g, '$1');
            formatted = formatted.replace(/(\w)_\{?(\d+)\}?/g, '$1<sub>$2</sub>');
            formatted = formatted.replace(/(\w)\^\{?([\d+\-−]+)\}?/g, (match, base, exponent) => { const cleanExponent = exponent.replace('−', '-'); return `${base}<sup>${cleanExponent}</sup>`; });
            formatted = formatted.replace(/\\rightarrow/g, '&rarr;');
            formatted = formatted.replace(/\\\[\s*(.*?)\s*\\\]/g, '<p class="formula">$1</p>');
            formatted = formatted.replace(/^####\s+(.*)$/gm, '<h4>$1</h4>');
            formatted = formatted.replace(/^###\s+(.*)$/gm, '<h3>$1</h3>');
            formatted = formatted.replace(/^##\s+(.*)$/gm, '<h2>$1</h2>');
            formatted = formatted.replace(/^#\s+(.*)$/gm, '<h1>$1</h1>');
            formatted = formatted.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            formatted = formatted.replace(/\*(.*?)\*/g, '<em>$1</em>');
            const blocks = formatted.split(/\n\s*\n/).filter(p => p.trim().length > 0);
            formatted = blocks.map(block => {
                if (block.startsWith('<h') || block.startsWith('<p class="formula">')) return block;
                let content = block.replace(/\n/g, ' ');
                return `<p>${content}</p>`;
            }).join('');
            return formatted;
        }

        // ========== MODAL FUNCTIONS ==========
        function showModal() { storyModal.classList.add('active'); document.body.style.overflow = 'hidden'; }
        function hideModal() {
            storyModal.classList.remove('active');
            if (!imageFullscreenOverlay.classList.contains('active')) { document.body.style.overflow = ''; }
            modalTextArea.scrollTop = 0;
            console.log("Scroll set to 0 on hideModal");
            resetModalState();
        }
        function resetModalState() {
             modalLoadingIndicator.style.display = 'flex';
             modalStoryContentArea.classList.add('content-hidden');
             modalError.classList.add('content-hidden');
             modalTitle.textContent = '';
             modalContent.innerHTML = '';
             modalErrorMessage.textContent = '';
             chatHistory.innerHTML = '';
             chatInput.value = '';
             chatLoadingIndicator.style.display = 'none';
             chatSendBtn.disabled = false;
             currentAnimalTitle = null; // Clear chat context
             hideFullscreenImage(); // Ensure fullscreen is also hidden
        }

        // ========== FULLSCREEN IMAGE FUNCTIONS ========== (sin cambios)
        function showFullscreenImage(imgSrc) { /* ... (same as before) ... */
            if (!imageFullscreenOverlay || !fullscreenImage) return;
            fullscreenImage.src = imgSrc;
            imageFullscreenOverlay.classList.add('active');
            document.body.style.overflow = 'hidden';
         }
        function hideFullscreenImage() { /* ... (same as before) ... */
            if (!imageFullscreenOverlay) return;
            imageFullscreenOverlay.classList.remove('active');
            if (!storyModal.classList.contains('active')) {
                 document.body.style.overflow = '';
            }
            fullscreenImage.src = '';
         }

        // ========== CHAT FUNCTIONS ========== (sin cambios lógicos)
        function addChatMessage(message, sender) { /* ... (same as before) ... */
            const msgDiv = document.createElement('div');
            msgDiv.classList.add('chat-message', sender === 'user' ? 'user-message' : 'ai-message');
            message = message.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            message = message.replace(/\*(.*?)\*/g, '<em>$1</em>');
            msgDiv.innerHTML = message;
            chatHistory.appendChild(msgDiv);
            chatHistory.scrollTop = chatHistory.scrollHeight;
         }
        function addChatError(message) { /* ... (same as before) ... */
             const errorDiv = document.createElement('div');
             errorDiv.classList.add('chat-error');
             errorDiv.textContent = message;
             chatHistory.appendChild(errorDiv);
             chatHistory.scrollTop = chatHistory.scrollHeight;
         }
        async function handleSendMessage() { /* ... (same as before) ... */
            const userQuery = chatInput.value.trim();
            if (!userQuery || chatSendBtn.disabled || !currentAnimalTitle) return; // Added check for context

            addChatMessage(userQuery, 'user');
            chatInput.value = '';
            chatSendBtn.disabled = true;
            chatLoadingIndicator.style.display = 'block';

            try {
                const aiResponse = await fetchChatResponse(userQuery);
                addChatMessage(aiResponse, 'ai');
            } catch (error) {
                console.error("Chat Error:", error);
                addChatError(`Error IA: ${error.message}`); // Use friendly error message
            } finally {
                chatLoadingIndicator.style.display = 'none';
                chatSendBtn.disabled = false;
                chatInput.focus();
            }
         }

        // ========== UI & EVENT HANDLERS ==========
        function getRandomElement(arr) { return arr[Math.floor(Math.random() * arr.length)]; }
        function shuffleArray(array) { let ci=array.length,ri;while(ci>0){ri=Math.floor(Math.random()*ci);ci--;[array[ci],array[ri]]=[array[ri],array[ci]];} return array; }
        function createTitleItem(title) { const div=document.createElement('div'); div.className='title-item'; div.textContent=title; div.setAttribute('data-title', title); div.addEventListener('click', () => handleTitleClick(title)); return div; }
        function displayTitles(titles) {
             if (!titleListContainer || !titlesLoading) return;
             const sortedTitles = titles.sort((a, b) => a.localeCompare(b)); // Keep alphabetical sort
             titleListContainer.innerHTML = '';
             titlesLoading.style.display = 'none';
             if (sortedTitles.length === 0) { titleListContainer.innerHTML = '<p class="text-gray-500 col-span-full text-center font-sans">» No hay especies catalogadas actualmente «</p>'; return; }
             sortedTitles.forEach(title => titleListContainer.appendChild(createTitleItem(title)));
         }
        function appendTitles(newTitles) {
             if (!titleListContainer || !newTitles || newTitles.length === 0) return;
             const existingTitles = new Set(Array.from(titleListContainer.querySelectorAll('.title-item')).map(item => item.dataset.title));
             newTitles.forEach(title => { if (!existingTitles.has(title)) { titleListContainer.appendChild(createTitleItem(title)); } });
             filterTitles(searchInput.value); // Re-apply filter
         }

        // *** MODIFIED: handleTitleClick (Context, Image Placeholder Icon) ***
        async function handleTitleClick(title) {
            resetModalState();
            showModal();
            modalTitle.textContent = title;
            currentAnimalTitle = title; // *** SET CHAT CONTEXT ***
            modalContent.innerHTML = '';
            chatHistory.innerHTML = '';
            modalError.classList.add('content-hidden');
            modalLoadingIndicator.style.display = 'flex';

            try {
                const rawExplanationText = await fetchExplanationText(title);
                const formattedExplanation = formatExplanationText(rawExplanationText);

                modalLoadingIndicator.style.display = 'none';
                modalContent.innerHTML = formattedExplanation;
                modalStoryContentArea.classList.remove('content-hidden');

                modalTextArea.scrollTop = 0;
                console.log("Scroll set to 0 after content visible");

                // Prepare image placeholder WITHIN modalContent
                const placeholderDiv = document.createElement('div');
                placeholderDiv.className = 'image-placeholder';
                placeholderDiv.innerHTML = `
                    <div class="spinner"></div>
                    <i class="fas fa-image placeholder-icon"></i> <!-- Generic image icon -->
                    <p style="font-size: 0.8em; margin-top: 0.5rem;">Generando ilustración/foto...</p>
                `;
                modalContent.appendChild(placeholderDiv);

                // Create image element
                const imgElement = document.createElement('img');
                imgElement.className = 'final-image'; // For styling and click listener
                imgElement.alt = `Ilustración o fotografía de ${title}`;
                imgElement.style.display = 'none';

                imgElement.onload = () => {
                    console.log("Image loaded successfully.");
                    placeholderDiv.remove();
                    imgElement.style.display = 'block';
                    imgElement.addEventListener('click', () => showFullscreenImage(imgElement.src));
                };
                imgElement.onerror = () => {
                    console.error("Error loading image for:", title);
                    placeholderDiv.innerHTML = `<i class="fas fa-eye-slash placeholder-icon"></i><p style="font-size:0.8em;margin-top:0.5rem;">Ilustración no disponible.</p>`;
                };

                const imageUrl = createPollinationsImageUrl(title);
                if (imageUrl) {
                    imgElement.src = imageUrl;
                    modalContent.appendChild(imgElement);
                } else {
                     console.error("Could not create image URL for:", title);
                     placeholderDiv.innerHTML = `<i class="fas fa-exclamation-circle placeholder-icon"></i><p style="font-size:0.8em;margin-top:0.5rem;">Error URL de imagen.</p>`;
                }

            } catch (error) {
                console.error("Failed display:", error);
                modalLoadingIndicator.style.display = 'none';
                modalErrorMessage.textContent = error.message || "Error desconocido al cargar datos de la especie.";
                modalError.classList.remove('content-hidden');
                modalStoryContentArea.classList.remove('content-hidden');
                modalContent.innerHTML = '';
                chatSection.classList.add('content-hidden');
            }
        }

        // *** MODIFIED: handleGenerateMoreTitles (Button text) ***
        async function handleGenerateMoreTitles() {
             if (!generateMoreBtn || !generateMoreSpinner || !generateMoreContainer) return;
             generateMoreBtn.disabled = true;
             generateMoreBtn.innerHTML = '<i class="fas fa-sync-alt mr-2 animate-spin"></i> Buscando más especies...';
             try {
                 const newTitles = await fetchGeneratedTitles();
                 if (newTitles && newTitles.length > 0) { appendTitles(newTitles); }
                 else { alert("No se pudieron encontrar más especies en este momento."); }
             } catch (error) {
                 console.error("Failed title generation:", error);
                 alert(`Error al buscar especies: ${error.message}`); // Use friendly error
             } finally {
                 generateMoreBtn.disabled = false;
                 // Restore original button text
                 generateMoreBtn.innerHTML = '<i class="fas fa-sync-alt mr-2 animate-spin hidden"></i> Descubrir Más Especies';
             }
         }

         // *** Search Filter Function (Accent normalization included) ***
         function filterTitles(searchTerm) {
             const term = searchTerm.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "").trim();
             const titleItems = titleListContainer.querySelectorAll('.title-item');
             let visibleCount = 0;
             titleItems.forEach(item => {
                 const titleText = item.dataset.title.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");
                 const isVisible = titleText.includes(term);
                 item.classList.toggle('hidden', !isVisible);
                 if (isVisible) visibleCount++;
             });
             noResultsMsg.classList.toggle('hidden', visibleCount > 0);
         }

        // ========== INITIALIZATION ========== (sin cambios estructurales)
        function initApp() {
            // Check essential elements
             if (!titleListContainer || !storyModal || !modalCloseBtn || !generateMoreBtn || !titlesLoading || !searchInput || !noResultsMsg || !chatInput || !chatSendBtn || !imageFullscreenOverlay || !fullscreenCloseBtn) {
                console.error("Initialization failed: Missing essential elements.");
                document.body.innerHTML = '<p style="color: red; font-size: 1.5em; text-align: center; padding-top: 3em;">Error Crítico: Faltan componentes esenciales de la interfaz.</p>';
                return;
             }
            // Add Listeners
            modalCloseBtn.addEventListener('click', hideModal);
            storyModal.addEventListener('click', (event) => { if (event.target === storyModal) hideModal(); });
            generateMoreBtn.addEventListener('click', handleGenerateMoreTitles);
            searchInput.addEventListener('input', (event) => filterTitles(event.target.value));
            searchInput.addEventListener('keypress', (event) => { if (event.key === 'Enter') event.preventDefault(); });
            chatSendBtn.addEventListener('click', handleSendMessage);
            chatInput.addEventListener('keypress', (event) => { if (event.key === 'Enter') handleSendMessage(); });
            imageFullscreenOverlay.addEventListener('click', hideFullscreenImage);
            fullscreenCloseBtn.addEventListener('click', (event) => { event.stopPropagation(); hideFullscreenImage(); });

            // Initial Display
            displayTitles(predefinedTitles);
            noResultsMsg.classList.add('hidden');
            console.log(`Initialized with ${predefinedTitles.length} predefined titles.`);
        }
        document.addEventListener('DOMContentLoaded', initApp);
    </script>

</body>
</html>