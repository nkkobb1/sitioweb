<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tarea de Atenci√≥n Dividida</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Poppins:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Animate.css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <!-- Toastify -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <style>
        :root {
            --primary: #9D4EDD;
            --secondary: #7B2CBF;
            --accent: #5A189A;
            --neon-purple: #9D4EDD;
            --neon-orange: #FF6B35;
            --neon-blue: #3A86FF;
            --neon-green: #38B000;
            --dark-bg: #15102C;
            --card-bg: #241B3C;
            --card-dark: #1A1428;
            --light-text: #F8F9FA;
            --gray-text: #ADB5BD;
            --success: #38B000;
            --warning: #FF9F1C;
            --danger: #FF5C8D;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: var(--dark-bg);
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(157, 78, 221, 0.2) 0%, transparent 30%),
                radial-gradient(circle at 90% 80%, rgba(58, 134, 255, 0.2) 0%, transparent 30%),
                radial-gradient(circle at 60% 40%, rgba(255, 107, 53, 0.1) 0%, transparent 40%);
            color: var(--light-text);
            overflow-x: hidden;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background: var(--card-dark);
            background-image: linear-gradient(to right, rgba(157, 78, 221, 0.4), rgba(90, 24, 154, 0.1));
            color: white;
            padding: 40px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
            border-bottom-left-radius: 20px;
            border-bottom-right-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="rgba(157, 78, 221, 0.1)" fill-opacity="1" d="M0,224L48,213.3C96,203,192,181,288,154.7C384,128,480,96,576,101.3C672,107,768,149,864,181.3C960,213,1056,235,1152,213.3C1248,192,1344,128,1392,96L1440,64L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>');
            background-size: cover;
            background-position: center bottom;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            font-weight: 700;
            position: relative;
            text-shadow: 0 0 15px rgba(157, 78, 221, 0.8);
        }
        
        .subtitle {
            font-size: 1.2rem;
            margin-bottom: 20px;
            opacity: 0.95;
            font-weight: 300;
            letter-spacing: 0.5px;
            color: var(--gray-text);
        }
        
        .card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 40px;
            margin: 30px 0;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s, box-shadow 0.3s;
            border: 1px solid rgba(157, 78, 221, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(to right, var(--neon-purple), var(--neon-blue));
            z-index: 1;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.4), 0 0 20px rgba(157, 78, 221, 0.3);
        }
        
        .card-title {
            font-size: 2rem;
            margin-bottom: 25px;
            color: var(--light-text);
            position: relative;
            padding-bottom: 12px;
            font-weight: 600;
        }
        
        .card-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 60px;
            height: 4px;
            background: var(--neon-purple);
            border-radius: 4px;
            box-shadow: 0 0 10px rgba(157, 78, 221, 0.8);
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 14px 28px;
            background: linear-gradient(to right, var(--neon-purple), var(--secondary));
            color: white;
            border: none;
            border-radius: 12px;
            font-family: 'Poppins', sans-serif;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 10px 25px rgba(157, 78, 221, 0.3);
            outline: none;
            text-decoration: none;
            text-shadow: 0 0 10px rgba(157, 78, 221, 0.5);
        }
        
        .btn:hover {
            background: linear-gradient(to right, var(--secondary), var(--accent));
            transform: translateY(-2px);
            box-shadow: 0 15px 30px rgba(157, 78, 221, 0.4), 0 0 15px rgba(157, 78, 221, 0.4);
        }
        
        .btn:active {
            transform: translateY(1px);
        }
        
        .btn-secondary {
            background: linear-gradient(to right, var(--neon-orange), #FF4F1F);
            box-shadow: 0 10px 25px rgba(255, 107, 53, 0.3);
            text-shadow: 0 0 10px rgba(255, 107, 53, 0.5);
        }
        
        .btn-secondary:hover {
            background: linear-gradient(to right, #FF4F1F, #FF3D00);
            box-shadow: 0 15px 30px rgba(255, 107, 53, 0.4), 0 0 15px rgba(255, 107, 53, 0.4);
        }
        
        .task-container {
            position: relative;
            width: 100%;
            height: 450px;
            background: var(--card-dark);
            border-radius: 20px;
            overflow: hidden;
            margin: 30px 0;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(157, 78, 221, 0.2);
        }
        
        .object {
            position: absolute;
            width: 60px;
            height: 60px;
            background: linear-gradient(to bottom right, var(--neon-purple), var(--secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.2rem;
            box-shadow: 0 0 25px rgba(157, 78, 221, 0.6);
            transition: box-shadow 0.3s, transform 0.3s;
            cursor: pointer;
            user-select: none;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.7);
        }
        
        .object:hover {
            box-shadow: 0 0 40px rgba(157, 78, 221, 0.8);
            transform: scale(1.05);
        }
        
        .stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .stat-card {
            flex: 1;
            min-width: 200px;
            background: var(--card-dark);
            padding: 25px 20px;
            border-radius: 16px;
            margin: 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
            transition: transform 0.3s, box-shadow 0.3s;
            border: 1px solid rgba(157, 78, 221, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at top right, rgba(157, 78, 221, 0.2), transparent 70%);
            pointer-events: none;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3), 0 0 15px rgba(157, 78, 221, 0.3);
        }
        
        .stat-card h3 {
            color: var(--gray-text);
            font-size: 1.1rem;
            margin-bottom: 15px;
            font-weight: 500;
        }
        
        .stat-card .value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--light-text);
            line-height: 1;
            text-shadow: 0 0 15px rgba(157, 78, 221,
            0.7);
        }
        
        .progress-container {
            margin: 35px 0;
            padding: 20px;
            background: var(--card-dark);
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(157, 78, 221, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .progress-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at bottom left, rgba(58, 134, 255, 0.2), transparent 70%);
            pointer-events: none;
        }
        
        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 0 10px;
            font-weight: 500;
            color: var(--gray-text);
        }
        
        .progress-bar {
            height: 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.3);
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(90deg, var(--neon-purple), var(--neon-blue));
            border-radius: 6px;
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 0 15px rgba(157, 78, 221, 0.5);
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 40px 0;
            flex-wrap: wrap;
        }
        
        .settings {
            padding: 30px;
            background: var(--card-dark);
            border-radius: 20px;
            margin: 40px 0;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(157, 78, 221, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .settings::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at bottom right, rgba(58, 134, 255, 0.15), transparent 70%);
            pointer-events: none;
        }
        
        .settings-title {
            font-size: 1.6rem;
            margin-bottom: 25px;
            color: var(--light-text);
            font-weight: 600;
            position: relative;
            display: inline-block;
        }
        
        .settings-title::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 50px;
            height: 3px;
            background: var(--neon-purple);
            border-radius: 3px;
            box-shadow: 0 0 10px rgba(157, 78, 221, 0.8);
        }
        
        .settings-group {
            margin-bottom: 25px;
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid rgba(157, 78, 221, 0.1);
        }
        
        .settings-label {
            display: block;
            margin-bottom: 15px;
            font-weight: 500;
            color: var(--gray-text);
        }
        
        .slider {
            width: 100%;
            -webkit-appearance: none;
            height: 8px;
            border-radius: 4px;
            background: rgba(255, 255, 255, 0.1);
            outline: none;
            margin-bottom: 15px;
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: linear-gradient(to bottom right, var(--neon-purple), var(--secondary));
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 0 15px rgba(157, 78, 221, 0.6);
        }
        
        .slider::-webkit-slider-thumb:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(157, 78, 221, 0.8);
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background-color: var(--card-bg);
            margin: auto;
            padding: 40px;
            border-radius: 24px;
            max-width: 600px;
            width: 90%;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.3), 0 0 30px rgba(157, 78, 221, 0.3);
            position: relative;
            transform: scale(0.9);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
            border: 1px solid rgba(157, 78, 221, 0.2);
        }
        
        .modal.show {
            display: flex;
        }
        
        .modal.show .modal-content {
            transform: scale(1);
            opacity: 1;
        }
        
        .close {
            position: absolute;
            right: 25px;
            top: 20px;
            color: var(--gray-text);
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s, text-shadow 0.3s;
            z-index: 10;
        }
        
        .close:hover {
            color: var(--danger);
            text-shadow: 0 0 10px rgba(255, 92, 141, 0.8);
        }
        
        .achievement {
            display: flex;
            align-items: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            margin-bottom: 15px;
            transition: all 0.3s;
            border: 1px solid rgba(157, 78, 221, 0.15);
        }
        
        .achievement:hover {
            transform: translateX(5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2), 0 0 15px rgba(157, 78, 221, 0.2);
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(157, 78, 221, 0.3);
        }
        
        .achievement-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(to bottom right, var(--neon-purple), var(--secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            margin-right: 20px;
            flex-shrink: 0;
            font-size: 1.4rem;
            box-shadow: 0 0 20px rgba(157, 78, 221, 0.4);
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.7);
        }
        
        .achievement.locked {
            opacity: 0.5;
            filter: grayscale(0.8);
        }
        
        .achievement.locked .achievement-icon {
            background: var(--card-dark);
            box-shadow: none;
        }
        
        .achievement h4 {
            color: var(--light-text);
            margin-bottom: 5px;
        }
        
        .achievement p {
            color: var(--gray-text);
            font-size: 0.9rem;
        }
        
        /* Animaciones */
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-15px); }
            100% { transform: translateY(0px); }
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 20px rgba(157, 78, 221, 0.5); }
            50% { box-shadow: 0 0 30px rgba(157, 78, 221, 0.8); }
            100% { box-shadow: 0 0 20px rgba(157, 78, 221, 0.5); }
        }
        
        @keyframes glow {
            0% { text-shadow: 0 0 10px rgba(157, 78, 221, 0.5); }
            50% { text-shadow: 0 0 20px rgba(157, 78, 221, 0.8), 0 0 30px rgba(157, 78, 221, 0.6); }
            100% { text-shadow: 0 0 10px rgba(157, 78, 221, 0.5); }
        }
        
        .float {
            animation: float 4s ease-in-out infinite;
        }
        
        .pulse {
            animation: pulse 2s ease-in-out infinite;
        }
        
        .glow {
            animation: glow 2s ease-in-out infinite;
        }
        
        /* Estilos para dispositivos m√≥viles */
        @media (max-width: 768px) {
            h1 {
                font-size: 2.2rem;
            }
            
            .card {
                padding: 25px;
            }
            
            .task-container {
                height: 350px;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                margin-bottom: 10px;
                justify-content: center;
            }
        }
        
        /* Minijuego y niveles */
        .minigame {
            display: none;
            position: relative;
            width: 100%;
            height: 350px;
            background: var(--card-dark);
            border-radius: 20px;
            overflow: hidden;
            margin-top: 30px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(157, 78, 221, 0.2);
        }
        
        .target {
            position: absolute;
            width: 40px;
            height: 40px;
            background: linear-gradient(to bottom right, var(--neon-orange), #FF4F1F);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(255, 107, 53, 0.5);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .target:hover {
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(255, 107, 53, 0.8);
        }
        
        .level-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 8px 16px;
            background: linear-gradient(to right, var(--neon-purple), var(--secondary));
            color: white;
            border-radius: 30px;
            font-size: 0.9rem;
            margin-left: 10px;
            vertical-align: middle;
            box-shadow: 0 0 15px rgba(157, 78, 221, 0.4);
            font-weight: 600;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }
        
        .confetti {
            position: absolute;
            width: 12px;
            height: 12px;
            background: var(--neon-purple);
            opacity: 0.8;
            z-index: 1000;
        }
        
        /* Efectos adicionales para una experiencia de casino */
        .neon-border {
            border: 1px solid rgba(157, 78, 221, 0.3);
            box-shadow: 0 0 15px rgba(157, 78, 221, 0.3);
        }
        
        .card h2, .modal h2 {
            color: white;
            text-shadow: 0 0 15px rgba(157, 78, 221, 0.7);
        }
        
        #start-btn {
            background: linear-gradient(to right, var(--neon-green), #2C9D00);
            box-shadow: 0 10px 25px rgba(56, 176, 0, 0.3), 0 0 15px rgba(56, 176, 0, 0.3);
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.7);
        }
        
        #start-btn:hover {
            background: linear-gradient(to right, #2C9D00, #269200);
            box-shadow: 0 15px 30px rgba(56, 176, 0, 0.4), 0 0 20px rgba(56, 176, 0, 0.4);
        }
        
        #achievements-btn {
            background: linear-gradient(to right, var(--neon-blue), #2778FF);
            box-shadow: 0 10px 25px rgba(58, 134, 255, 0.3), 0 0 15px rgba(58, 134, 255, 0.3);
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.7);
        }
        
        #achievements-btn:hover {
            background: linear-gradient(to right, #2778FF, #1667FF);
            box-shadow: 0 15px 30px rgba(58, 134, 255, 0.4), 0 0 20px rgba(58, 134, 255, 0.4);
        }
        
        #minigame-btn {
            background: linear-gradient(to right, var(--neon-orange), #FF4F1F);
            color: white;
            box-shadow: 0 10px 25px rgba(255, 107, 53, 0.3), 0 0 15px rgba(255, 107, 53, 0.3);
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.7);
        }
        
        #minigame-btn:hover {
            background: linear-gradient(to right, #FF4F1F, #FF3D00);
            box-shadow: 0 15px 30px rgba(255, 107, 53, 0.4), 0 0 20px rgba(255, 107, 53, 0.4);
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1 class="animate__animated animate__fadeInDown">Tarea de Atenci√≥n Dividida</h1>
            <p class="subtitle animate__animated animate__fadeIn animate__delay-1s">Entrena tu mente con ejercicios de atenci√≥n dividida</p>
        </div>
    </header>
    
    <div class="container">
        <div class="card animate__animated animate__fadeInUp">
            <h2 class="card-title">Instrucciones</h2>
            <p>Esta tarea eval√∫a tu capacidad para dividir tu atenci√≥n entre dos est√≠mulos:</p>
            <ul style="margin: 20px 0 20px 20px; line-height: 1.6;">
                <li><strong>Visual:</strong> Sigue el c√≠rculo azul con la mirada y haz clic cuando cambie de color.</li>
                <li><strong>Auditivo:</strong> Cuenta los pitidos que escuchas y reporta el n√∫mero cuando termine la prueba.</li>
            </ul>
            <p>Tu objetivo es mantener un buen rendimiento en ambas tareas simult√°neamente.</p>
            
            <div class="stats">
                <div class="stat-card">
                    <h3>Nivel actual</h3>
                    <div class="value" id="level">1</div>
                </div>
                <div class="stat-card">
                    <h3>Puntuaci√≥n</h3>
                    <div class="value" id="score">0</div>
                </div>
                <div class="stat-card">
                    <h3>Precisi√≥n</h3>
                    <div class="value" id="accuracy">0%</div>
                </div>
            </div>
            
            <div class="progress-container">
                <div class="progress-label">
                    <span>Progreso del nivel</span>
                    <span id="progress-text">0%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress" id="level-progress" style="width: 0%"></div>
                </div>
            </div>
            
            <div class="task-container" id="task-container">
                <div class="object" id="visual-object">1</div>
            </div>
            
            <div class="controls">
                <button class="btn" id="start-btn"><i class="fas fa-play"></i> Iniciar tarea</button>
                <button class="btn btn-secondary" id="settings-btn"><i class="fas fa-cog"></i> Configuraci√≥n</button>
                <button class="btn" id="achievements-btn" style="background: var(--success);"><i class="fas fa-trophy"></i> Logros</button>
                <button class="btn" id="minigame-btn" style="background: var(--warning); color: var(--dark);"><i class="fas fa-gamepad"></i> Minijuego</button>
            </div>
            
            <div class="settings">
                <h3 class="settings-title">Configuraci√≥n</h3>
                
                <div class="settings-group">
                    <label class="settings-label">Velocidad del objeto visual</label>
                    <input type="range" min="1" max="10" value="5" class="slider" id="visual-speed">
                    <span id="visual-speed-value">5</span>
                </div>
                
                <div class="settings-group">
                    <label class="settings-label">Frecuencia de pitidos auditivos</label>
                    <input type="range" min="1" max="10" value="5" class="slider" id="audio-frequency">
                    <span id="audio-frequency-value">5</span>
                </div>
                
                <div class="settings-group">
                    <label class="settings-label">Duraci√≥n de la tarea (segundos)</label>
                    <input type="range" min="30" max="300" step="30" value="60" class="slider" id="task-duration">
                    <span id="task-duration-value">60</span>
                </div>
            </div>
            
            <!-- Minijuego -->
            <div class="minigame" id="minigame-container">
                <!-- Los objetivos se generar√°n din√°micamente -->
            </div>
        </div>
    </div>
    
    <!-- Modal de resultados -->
    <div class="modal" id="results-modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 style="text-align: center; color: var(--primary); margin-bottom: 20px;">Resultados</h2>
            
            <div style="display: flex; justify-content: space-around; flex-wrap: wrap; margin-bottom: 30px;">
                <div style="text-align: center; padding: 15px;">
                    <div style="font-size: 1.2rem; color: var(--dark); margin-bottom: 5px;">Aciertos visuales</div>
                    <div style="font-size: 2.5rem; font-weight: 700; color: var(--primary);" id="visual-hits">0</div>
                </div>
                <div style="text-align: center; padding: 15px;">
                    <div style="font-size: 1.2rem; color: var(--dark); margin-bottom: 5px;">Precisi√≥n auditiva</div>
                    <div style="font-size: 2.5rem; font-weight: 700; color: var(--primary);" id="audio-accuracy">0%</div>
                </div>
            </div>
            
            <div style="margin-bottom: 25px;">
                <h3 style="margin-bottom: 10px; color: var(--secondary);">Puntuaci√≥n total</h3>
                <div style="font-size: 3rem; font-weight: 700; text-align: center; color: var(--accent);" id="final-score">0</div>
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button class="btn" id="try-again-btn">Intentar de nuevo</button>
            </div>
        </div>
    </div>
    
    <!-- Modal de logros -->
    <div class="modal" id="achievements-modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 style="text-align: center; color: var(--primary); margin-bottom: 20px;">Logros</h2>
            
            <div id="achievements-container">
                <div class="achievement" data-id="first-task">
                    <div class="achievement-icon"><i class="fas fa-star"></i></div>
                    <div>
                        <h4>Primera tarea</h4>
                        <p>Completa tu primera tarea de atenci√≥n dividida</p>
                    </div>
                </div>
                
                <div class="achievement locked" data-id="perfect-score">
                    <div class="achievement-icon"><i class="fas fa-award"></i></div>
                    <div>
                        <h4>Puntuaci√≥n perfecta</h4>
                        <p>Obt√©n una puntuaci√≥n perfecta en una tarea</p>
                    </div>
                </div>
                
                <div class="achievement locked" data-id="level-5">
                    <div class="achievement-icon"><i class="fas fa-level-up-alt"></i></div>
                    <div>
                        <h4>Experto</h4>
                        <p>Alcanza el nivel 5</p>
                    </div>
                </div>
                
                <div class="achievement locked" data-id="10-tasks">
                    <div class="achievement-icon"><i class="fas fa-tasks"></i></div>
                    <div>
                        <h4>Persistente</h4>
                        <p>Completa 10 tareas</p>
                    </div>
                </div>
                
                <div class="achievement locked" data-id="minigame-master">
                    <div class="achievement-icon"><i class="fas fa-gamepad"></i></div>
                    <div>
                        <h4>Maestro del minijuego</h4>
                        <p>Alcanza 30 puntos en el minijuego</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>
    
    <script>
        // Variables globales
        let isTaskRunning = false;
        let visualInterval;
        let audioInterval;
        let taskDuration;
        let remainingTime;
        let taskTimer;
        let visualHits = 0;
        let visualMisses = 0;
        let audioBeepsCount = 0;
        let userAudioCount = 0;
        let visualColorChanges = 0;
        let level = 1;
        let score = 0;
        let totalTasksCompleted = 0;
        let achievements = {
            'first-task': false,
            'perfect-score': false,
            'level-5': false,
            '10-tasks': false,
            'minigame-master': false
        };
        
        // Reemplazo del sistema de sonido
        // Audio simplificado (sin depender de bibliotecas externas que pueden fallar)
        const AudioContext = window.AudioContext || window.webkitAudioContext;
        const audioContext = new AudioContext();
        
        // Sistema de sonido simplificado
        const audioSystem = {
            context: audioContext,
            initialized: false,
            sounds: {},
            
            // Inicializar el sistema de audio
            init: function() {
                if (this.initialized) return;
                
                // Desbloquear contexto de audio
                if (this.context.state === 'suspended') {
                    this.context.resume();
                }
                
                // Crear sonidos b√°sicos usando osciladores
                this.createBeepSound();
                this.createSuccessSound();
                this.createFailSound();
                
                this.initialized = true;
                console.log('Sistema de audio inicializado');
            },
            
            // Crear sonido de beep
            createBeepSound: function() {
                this.sounds.beep = {
                    play: () => {
                        const oscillator = this.context.createOscillator();
                        const gainNode = this.context.createGain();
                        
                        oscillator.type = 'sine';
                        oscillator.frequency.value = 800;
                        gainNode.gain.value = 0.3;
                        
                        oscillator.connect(gainNode);
                        gainNode.connect(this.context.destination);
                        
                        oscillator.start();
                        
                        // Disminuir volumen gradualmente
                        gainNode.gain.exponentialRampToValueAtTime(0.001, this.context.currentTime + 0.3);
                        
                        // Detener despu√©s de 0.3 segundos
                        setTimeout(() => {
                            oscillator.stop();
                        }, 300);
                    }
                };
            },
            
            // Crear sonido de √©xito
            createSuccessSound: function() {
                this.sounds.success = {
                    play: () => {
                        const oscillator = this.context.createOscillator();
                        const gainNode = this.context.createGain();
                        
                        oscillator.type = 'sine';
                        oscillator.frequency.value = 523.25; // Do
                        gainNode.gain.value = 0.3;
                        
                        oscillator.connect(gainNode);
                        gainNode.connect(this.context.destination);
                        
                        oscillator.start();
                        
                        // Cambiar frecuencia para hacer un sonido de √©xito
                        oscillator.frequency.setValueAtTime(523.25, this.context.currentTime);
                        oscillator.frequency.exponentialRampToValueAtTime(783.99, this.context.currentTime + 0.2); // Sol
                        
                        // Disminuir volumen gradualmente
                        gainNode.gain.exponentialRampToValueAtTime(0.001, this.context.currentTime + 0.3);
                        
                        // Detener despu√©s de 0.3 segundos
                        setTimeout(() => {
                            oscillator.stop();
                        }, 300);
                    }
                };
            },
            
            // Crear sonido de error
            createFailSound: function() {
                this.sounds.fail = {
                    play: () => {
                        const oscillator = this.context.createOscillator();
                        const gainNode = this.context.createGain();
                        
                        oscillator.type = 'sine';
                        oscillator.frequency.value = 392.00; // Sol
                        gainNode.gain.value = 0.3;
                        
                        oscillator.connect(gainNode);
                        gainNode.connect(this.context.destination);
                        
                        oscillator.start();
                        
                        // Cambiar frecuencia para hacer un sonido de error
                        oscillator.frequency.setValueAtTime(392.00, this.context.currentTime);
                        oscillator.frequency.exponentialRampToValueAtTime(277.18, this.context.currentTime + 0.2); // Do#
                        
                        // Disminuir volumen gradualmente
                        gainNode.gain.exponentialRampToValueAtTime(0.001, this.context.currentTime + 0.3);
                        
                        // Detener despu√©s de 0.3 segundos
                        setTimeout(() => {
                            oscillator.stop();
                        }, 300);
                    }
                };
            }
        };
        
        // Elementos DOM
        const visualObject = document.getElementById('visual-object');
        const taskContainer = document.getElementById('task-container');
        const startBtn = document.getElementById('start-btn');
        const settingsBtn = document.getElementById('settings-btn');
        const achievementsBtn = document.getElementById('achievements-btn');
        const minigameBtn = document.getElementById('minigame-btn');
        const minigameContainer = document.getElementById('minigame-container');
        const resultsModal = document.getElementById('results-modal');
        const achievementsModal = document.getElementById('achievements-modal');
        const tryAgainBtn = document.getElementById('try-again-btn');
        
        // Inicializar audio con interacci√≥n del usuario
        document.addEventListener('click', () => {
            audioSystem.init();
        }, { once: true });
        
        document.addEventListener('touchstart', () => {
            audioSystem.init();
        }, { once: true });
        
        // Sliders y valores
        const visualSpeedSlider = document.getElementById('visual-speed');
        const visualSpeedValue = document.getElementById('visual-speed-value');
        const audioFrequencySlider = document.getElementById('audio-frequency');
        const audioFrequencyValue = document.getElementById('audio-frequency-value');
        const taskDurationSlider = document.getElementById('task-duration');
        const taskDurationValue = document.getElementById('task-duration-value');
        
        // Event listeners para los sliders
        visualSpeedSlider.addEventListener('input', () => {
            visualSpeedValue.textContent = visualSpeedSlider.value;
        });
        
        audioFrequencySlider.addEventListener('input', () => {
            audioFrequencyValue.textContent = audioFrequencySlider.value;
        });
        
        taskDurationSlider.addEventListener('input', () => {
            taskDurationValue.textContent = taskDurationSlider.value;
        });
        
        // Cerrar modales
        document.querySelectorAll('.close').forEach(closeBtn => {
            closeBtn.addEventListener('click', () => {
                resultsModal.classList.remove('show');
                achievementsModal.classList.remove('show');
            });
        });
        
        // Mostrar modal de logros
        achievementsBtn.addEventListener('click', () => {
            achievementsModal.classList.add('show');
        });
        
        // Reintentar despu√©s de ver resultados
        tryAgainBtn.addEventListener('click', () => {
            resultsModal.classList.remove('show');
            resetTask();
        });
        
        // Mover objeto visual aleatoriamente
        function moveVisualObject() {
            const speed = parseInt(visualSpeedSlider.value);
            const containerWidth = taskContainer.clientWidth - visualObject.clientWidth;
            const containerHeight = taskContainer.clientHeight - visualObject.clientHeight;
            
            // Posici√≥n aleatoria
            const randomX = Math.random() * containerWidth;
            const randomY = Math.random() * containerHeight;
            
            // Transici√≥n suave seg√∫n velocidad
            visualObject.style.transition = `transform ${11 - speed}00ms ease-out`;
            visualObject.style.transform = `translate(${randomX}px, ${randomY}px)`;
            
            // Cambio de color aleatorio con baja probabilidad
            if (Math.random() < 0.2) {
                visualObject.style.backgroundColor = 'var(--danger)';
                visualObject.style.background = 'linear-gradient(to bottom right, var(--danger), #FF2D70)';
                visualObject.style.boxShadow = '0 0 25px rgba(255, 92, 141, 0.8)';
                visualColorChanges++;
                
                // Volver al color original despu√©s de un breve tiempo
                setTimeout(() => {
                    if (isTaskRunning) {
                        visualObject.style.backgroundColor = 'var(--neon-purple)';
                        visualObject.style.background = 'linear-gradient(to bottom right, var(--neon-purple), var(--secondary))';
                        visualObject.style.boxShadow = '0 0 25px rgba(157, 78, 221, 0.6)';
                    }
                }, 1000);
            }
        }
        
        // Manejar clic en el objeto visual
        visualObject.addEventListener('click', () => {
            if (!isTaskRunning) return;
            
            // Si el objeto est√° rojo (cambio de color), es un acierto
            if (visualObject.style.backgroundColor === 'var(--danger)' || 
                window.getComputedStyle(visualObject).backgroundColor === 'rgb(255, 92, 141)') {  // Actualizado al nuevo color
                visualHits++;
                audioSystem.sounds.success.play();
                
                // Mostrar notificaci√≥n
                Toastify({
                    text: "¬°Acierto!",
                    duration: 1000,
                    gravity: "top",
                    position: 'right',
                    style: {
                        background: "linear-gradient(to right, var(--success), #2C9D00)",
                        boxShadow: "0 0 15px rgba(56, 176, 0, 0.4)"
                    }
                }).showToast();
                
                // Restaurar color
                visualObject.style.backgroundColor = 'var(--neon-purple)';
                visualObject.style.background = 'linear-gradient(to bottom right, var(--neon-purple), var(--secondary))';
                visualObject.style.boxShadow = '0 0 25px rgba(157, 78, 221, 0.6)';
            } else {
                visualMisses++;
                audioSystem.sounds.fail.play();
            }
            
            updateStats();
        });
        
        // Reproducir pitido auditivo
        function playAudioBeep() {
            const frequency = parseInt(audioFrequencySlider.value);
            
            // Mayor valor del slider = mayor probabilidad de pitido
            if (Math.random() < frequency / 10) {
                audioSystem.sounds.beep.play();
                audioBeepsCount++;
            }
        }
        
        // Iniciar tarea
        startBtn.addEventListener('click', () => {
            // Asegurar que el audio est√° inicializado
            audioSystem.init();
            
            if (isTaskRunning) {
                endTask();
            } else {
                startTask();
            }
        });
        
        function startTask() {
            // Reiniciar contadores
            visualHits = 0;
            visualMisses = 0;
            audioBeepsCount = 0;
            visualColorChanges = 0;
            
            // Configuraci√≥n
            isTaskRunning = true;
            startBtn.innerHTML = '<i class="fas fa-stop"></i> Detener';
            startBtn.style.background = 'linear-gradient(to right, var(--danger), #FF2D70)';
            startBtn.style.boxShadow = '0 10px 25px rgba(255, 92, 141, 0.3), 0 0 15px rgba(255, 92, 141, 0.3)';
            
            // Obtener duraci√≥n de la tarea
            taskDuration = parseInt(taskDurationSlider.value);
            remainingTime = taskDuration;
            
            // Establecer intervalos seg√∫n dificultad
            const visualSpeed = parseInt(visualSpeedSlider.value);
            const audioFrequency = parseInt(audioFrequencySlider.value);
            
            // Velocidad inversamente proporcional al valor del slider
            visualInterval = setInterval(moveVisualObject, (11 - visualSpeed) * 300);
            audioInterval = setInterval(playAudioBeep, (11 - audioFrequency) * 500);
            
            // Temporizador
            taskTimer = setInterval(() => {
                remainingTime--;
                
                // Actualizar progreso
                const progress = 100 - (remainingTime / taskDuration * 100);
                document.getElementById('level-progress').style.width = `${progress}%`;
                document.getElementById('progress-text').textContent = `${Math.round(progress)}%`;
                
                if (remainingTime <= 0) {
                    endTask();
                }
            }, 1000);
            
            // Mover objeto inmediatamente
            moveVisualObject();
            
            // Notificaci√≥n de inicio
            Toastify({
                text: "¬°Tarea iniciada! Presta atenci√≥n a ambos est√≠mulos",
                duration: 3000,
                gravity: "top",
                position: 'center',
                style: {
                    background: "linear-gradient(to right, var(--neon-purple), var(--secondary))",
                    boxShadow: "0 0 20px rgba(157, 78, 221, 0.5)"
                }
            }).showToast();
        }
        
        function endTask() {
            // Detener todas las operaciones
            clearInterval(visualInterval);
            clearInterval(audioInterval);
            clearInterval(taskTimer);
            
            isTaskRunning = false;
            startBtn.innerHTML = '<i class="fas fa-play"></i> Iniciar tarea';
            startBtn.style.background = 'linear-gradient(to right, var(--primary), var(--secondary))';
            startBtn.style.boxShadow = '0 10px 25px rgba(157, 78, 221, 0.3), 0 0 15px rgba(157, 78, 221, 0.3)';
            
            // Mostrar modal para preguntar por el conteo auditivo
            askForAudioCount();
        }
        
        function askForAudioCount() {
            const userCount = prompt("¬øCu√°ntos pitidos escuchaste?", "0");
            userAudioCount = parseInt(userCount) || 0;
            
            showResults();
        }
        
        function showResults() {
            // Calcular precisi√≥n auditiva
            const audioDifference = Math.abs(audioBeepsCount - userAudioCount);
            const audioAccuracyPercent = Math.max(0, 100 - (audioDifference / audioBeepsCount * 100));
            
            // Calcular puntuaci√≥n visual
            const visualAccuracy = visualColorChanges > 0 ? 
                (visualHits / visualColorChanges) * 100 : 0;
            
            // Calcular puntuaci√≥n total
            const totalScore = Math.round((visualAccuracy + audioAccuracyPercent) / 2);
            
            // Actualizar estad√≠sticas en el modal
            document.getElementById('visual-hits').textContent = 
                `${visualHits}/${visualColorChanges} (${Math.round(visualAccuracy)}%)`;
            document.getElementById('audio-accuracy').textContent = 
                `${Math.round(audioAccuracyPercent)}%`;
            document.getElementById('final-score').textContent = totalScore;
            
            // Actualizar puntuaci√≥n global
            score += totalScore;
            document.getElementById('score').textContent = score;
            
            // Aumentar nivel si procede
            if (totalScore >= 80) {
                level++;
                document.getElementById('level').textContent = level;
                
                Toastify({
                    text: `¬°Has subido al nivel ${level}!`,
                    duration: 3000,
                    gravity: "top",
                    position: 'center',
                    style: {
                        background: "linear-gradient(to right, var(--neon-purple), var(--accent))",
                        boxShadow: "0 0 20px rgba(157, 78, 221, 0.5)"
                    }
                }).showToast();
            }
            
            // Actualizar precisi√≥n global
            const globalAccuracy = Math.round((visualAccuracy + audioAccuracyPercent) / 2);
            document.getElementById('accuracy').textContent = `${globalAccuracy}%`;
            
            // Incrementar contador de tareas completadas
            totalTasksCompleted++;
            
            // Desbloquear logros
            unlockAchievements(totalScore);
            
            // Mostrar modal de resultados
            resultsModal.classList.add('show');
        }
        
        function resetTask() {
            // Reiniciar progreso visual
            document.getElementById('level-progress').style.width = '0%';
            document.getElementById('progress-text').textContent = '0%';
            
            // Restaurar color del objeto
            visualObject.style.backgroundColor = 'var(--primary)';
            visualObject.style.transform = 'translate(0, 0)';
        }
        
        function unlockAchievements(taskScore) {
            // Primera tarea
            if (totalTasksCompleted === 1) {
                achievements['first-task'] = true;
            }
            
            // Puntuaci√≥n perfecta
            if (taskScore >= 95) {
                achievements['perfect-score'] = true;
            }
            
            // Nivel 5
            if (level >= 5) {
                achievements['level-5'] = true;
            }
            
            // 10 tareas
            if (totalTasksCompleted >= 10) {
                achievements['10-tasks'] = true;
            }
            
            // Actualizar interfaz de logros
            updateAchievementsUI();
        }
        
        function updateAchievementsUI() {
            // Recorrer todos los logros y actualizar su estado visual
            for (const [id, unlocked] of Object.entries(achievements)) {
                const achievementElement = document.querySelector(`.achievement[data-id="${id}"]`);
                
                if (unlocked && achievementElement.classList.contains('locked')) {
                    achievementElement.classList.remove('locked');
                    
                    // Notificar desbloqueo de logro
                    Toastify({
                        text: `¬°Logro desbloqueado: ${achievementElement.querySelector('h4').textContent}!`,
                        duration: 4000,
                        gravity: "bottom",
                        position: 'right',
                        style: {
                            background: "linear-gradient(to right, var(--neon-blue), #2778FF)",
                            boxShadow: "0 0 20px rgba(58, 134, 255, 0.5)"
                        }
                    }).showToast();
                }
            }
        }
        
        // Actualizar estad√≠sticas
        function updateStats() {
            // Implementaci√≥n b√°sica para actualizaci√≥n en tiempo real
        }
        
        // Minijuego
        let minigameScore = 0;
        let minigameTargets = 0;
        let minigameInterval;
        
        minigameBtn.addEventListener('click', () => {
            if (minigameContainer.style.display === 'block') {
                stopMinigame();
            } else {
                startMinigame();
            }
        });
        
        function startMinigame() {
            minigameContainer.style.display = 'block';
            minigameBtn.innerHTML = '<i class="fas fa-stop"></i> Detener minijuego';
            minigameScore = 0;
            minigameTargets = 0;
            
            createTarget();
            minigameInterval = setInterval(createTarget, 1500);
            
            // Notificaci√≥n
            Toastify({
                text: "¬°Haz clic en los objetivos r√°pidamente!",
                duration: 3000,
                gravity: "top",
                position: 'center',
                style: {
                    background: "linear-gradient(to right, var(--neon-orange), #FF4F1F)",
                    boxShadow: "0 0 20px rgba(255, 107, 53, 0.5)"
                }
            }).showToast();
        }
        
        function createTarget() {
            const target = document.createElement('div');
            target.className = 'target';
            
            // Posici√≥n aleatoria
            const x = Math.random() * (minigameContainer.clientWidth - 40);
            const y = Math.random() * (minigameContainer.clientHeight - 40);
            target.style.left = `${x}px`;
            target.style.top = `${y}px`;
            
            // Tama√±o aleatorio (m√°s peque√±o = m√°s dif√≠cil)
            const size = Math.max(20, Math.random() * 50);
            target.style.width = `${size}px`;
            target.style.height = `${size}px`;
            
            // Click handler
            target.addEventListener('click', () => {
                minigameScore++;
                audioSystem.sounds.success.play();
                target.remove();
                
                // Animaci√≥n de puntos
                showPoints(x, y);
                
                // Desbloquear logro si alcanza 30 puntos
                if (minigameScore >= 30 && !achievements['minigame-master']) {
                    achievements['minigame-master'] = true;
                    updateAchievementsUI();
                }
            });
            
            minigameContainer.appendChild(target);
            minigameTargets++;
            
            // Auto-eliminar despu√©s de un tiempo
            setTimeout(() => {
                if (target.parentNode === minigameContainer) {
                    target.remove();
                }
            }, 2000);
        }
        
        function showPoints(x, y) {
            const points = document.createElement('div');
            points.textContent = '+1';
            points.style.position = 'absolute';
            points.style.left = `${x}px`;
            points.style.top = `${y}px`;
            points.style.color = 'var(--success)';
            points.style.fontWeight = 'bold';
            points.style.pointerEvents = 'none';
            points.style.animation = 'float 1s ease-out forwards';
            
            minigameContainer.appendChild(points);
            
            setTimeout(() => {
                points.remove();
            }, 1000);
        }
        
        function stopMinigame() {
            minigameContainer.style.display = 'none';
            minigameBtn.innerHTML = '<i class="fas fa-gamepad"></i> Minijuego';
            clearInterval(minigameInterval);
            
            // Limpiar todos los objetivos
            const targets = minigameContainer.querySelectorAll('.target');
            targets.forEach(target => target.remove());
            
            // Mostrar resultado
            Toastify({
                text: `Minijuego finalizado: ${minigameScore} puntos`,
                duration: 3000,
                gravity: "top",
                position: 'center',
                style: {
                    background: "linear-gradient(to right, var(--neon-orange), #FF4F1F)",
                    boxShadow: "0 0 20px rgba(255, 107, 53, 0.5)"
                }
            }).showToast();
        }
        
        // Inicializaci√≥n
        updateAchievementsUI();
        
        // Efectos de confeti cuando se logra un hito importante
        function createConfetti() {
            const confettiCount = 100;
            const colors = ['#4361ee', '#3a0ca3', '#7209b7', '#06d6a0', '#ffd166'];
            
            for (let i = 0; i < confettiCount; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = `${Math.random() * 100}vw`;
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                
                // Formas aleatorias
                if (Math.random() > 0.5) {
                    confetti.style.borderRadius = '50%';
                } else {
                    confetti.style.width = `${5 + Math.random() * 10}px`;
                    confetti.style.height = `${5 + Math.random() * 10}px`;
                }
                
                document.body.appendChild(confetti);
                
                // Animaci√≥n de ca√≠da
                const animation = confetti.animate([
                    { transform: `translate(${Math.random() * 20 - 10}px, -10px) rotate(0deg)`, opacity: 1 },
                    { transform: `translate(${Math.random() * 400 - 200}px, ${window.innerHeight}px) rotate(${Math.random() * 720}deg)`, opacity: 0 }
                ], {
                    duration: 1000 + Math.random() * 3000,
                    easing: 'cubic-bezier(0.1, 0.4, 0.6, 1)'
                });
                
                animation.onfinish = () => confetti.remove();
            }
        }
    </script>
</body>
</html>